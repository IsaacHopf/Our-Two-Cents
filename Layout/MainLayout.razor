@inherits LayoutComponentBase

<MudThemeProvider Theme="@_theme" IsDarkMode="@_darkMode"/>
<MudPopoverProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudDrawer Open="true" Variant="DrawerVariant.Persistent" Elevation="0" Width="74px">
        <MudStack AlignItems="AlignItems.Center" Spacing="0" Class="h-100">
            <MudIcon Icon="@Icons.Material.TwoTone.SupervisorAccount" Size="Size.Large" Color="Color.Secondary" Class="brand"/>
            <NavMenu/>
            <MudToggleIconButton @bind-Toggled="_darkMode" Icon="@Icons.Material.Rounded.DarkMode"
                                 ToggledIcon="@Icons.Material.Rounded.LightMode" Class="opacity-75 mt-auto mb-2"/>
        </MudStack>
    </MudDrawer>
    <MudMainContent Class="pa-6 h-100">
        <ErrorBoundary @ref="@_errorBoundary">
            <ChildContent>
                @Body
            </ChildContent>
            <ErrorContent>
                <Error Exception="@context" ErrorBoundary="@_errorBoundary"/>
            </ErrorContent>
        </ErrorBoundary>
    </MudMainContent>
</MudLayout>

@code 
{
    private bool _darkMode;
    private ErrorBoundary? _errorBoundary;

    private readonly MudTheme _theme = new()
    {
        Typography = new Typography()
        {
            H4 = new H4Typography()
            {
                FontSize = "1.85rem"
            },
            Caption = new CaptionTypography()
            {
                FontSize = ".7rem"
            }
        },
        PaletteLight = new PaletteLight
        {
            Primary = Colors.Blue.Darken3,
            Secondary = Colors.Blue.Darken4,
            Success = Colors.Green.Default,
            Error = Colors.Red.Default,
            DrawerBackground = Colors.Gray.Lighten4
        },
        PaletteDark = new PaletteDark
        {
            Primary = Colors.Blue.Darken1,
            Secondary = Colors.Blue.Darken2,
            Surface = "#32333D"
        }
    };
}